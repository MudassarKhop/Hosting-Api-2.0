<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="./styles.css" />
    <script src="./scripts/psw.js"></script>
    <title>Document</title>
  </head>
  <body>
    <nav>
      <div id="navlinks">
        <a href="./login.html"> LOGIN</a>
        <a href="./register.html">REGISTER</a>
        <a href="./users.html"> USERS</a>
        <a href="./products.html">PRODUCTS</a>
      </div>
    </nav>
    <h1>eCommerce store</h1>
    <script>
          let token = window.localStorage.getItem("user.token");
          let user = JSON.parse(window.localStorage(getItem("user")));

          function getProducts(url) {
            fetch(url + "/" + "products", {
              method: "GET",
              headers: {
                "Content-Type": "application/json",
              },
            })
              const data = await response.json();
      if (data.length === 0) {
        alert("Table Users is empty");
      } else {
        showProducts(data);
      }
          }

          function showProducts(data) {
            let table = `<tr>
                <th>sku</th>
                <th>name</th>
                <th>price</th>
                <th>weight</th>
                <th>descriptions</th>
                <th>thumbnail</th>
                <th>image</th>
                <th>category</th>
                <th>create_date</th>
                <th>stock</th>
                </tr>`;
            for (let p of data) {
              table += `<tr>
                <td>${p.sku}</td>
                <td>${p.name}</td>
                <td>${p.price}</td>
                <td>${p.weight}</td>
                <td>${p.descriptions}</td>
                <td>${p.thumbnail}</td>
                <td>${p.image}</td>
                <td>${p.category}</td>
                <td>${p.create_date}</td>
                <td>${p.stock}</td>
                <tr>`;
            }
            document.getElementById("products").innerHTML = table;
          }

          getProducts(url);
          console.log("It is working");
    </script>
  </body>
</html>
